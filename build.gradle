import tool.UpVersion

ext {
    lwjglVersion = "3.3.0"
}

allprojects {
    group 'imgui-java'
    version property('version')

    repositories {
        mavenCentral()
    }

    tasks.withType(JavaCompile) {
        sourceCompatibility = JavaVersion.VERSION_11

        java {
            toolchain {
                languageVersion.set(JavaLanguageVersion.of(17))
            }
        }
    }
}

tasks.register('upVersion', UpVersion)

tasks.register('buildAll') { t ->
    t.group = 'build'
    t.description = 'Build all project sources.'

    t.dependsOn ':modules:io.github.spair.imgui.app:shadowJar'

    ['.app', '', '.lwjgl'].each { module ->
        ['build', 'sourcesJar', 'javadocJar'].each { task ->
            t.dependsOn ":modules:io.github.spair.imgui$module:$task"
        }
    }
}
